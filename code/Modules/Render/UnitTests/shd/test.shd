//------------------------------------------------------------------------------
//  test.shd
//------------------------------------------------------------------------------

/*
Bla Bla Bla
*/

//------------------------------------------------------------------------------
vec4 ${func: MyColorFunc}(vec4 nrm, vec4 texColor) {
    return ((nrm * 0.5) + 0.5) * 0.75 + texColor * texColor * texColor;
}

//------------------------------------------------------------------------------
void ${vs: MyVertexShader}() {

    ${uniform: type=mat4 name=mvp bind=ModelViewProjection}
    ${in: vec4 normal}
    ${in: vec2 texcoord0}
    ${out: vec4 nrm}
    ${out: vec2 uv}

    $position = mvp * position;
    nrm = normal;
    uv  = texcoord0;
}

//------------------------------------------------------------------------------
void ${fs: MyFragmentShader}() {
    
    ${uniform: sampler2D tex}
    ${in: vec4 nrm}
    ${in: vec2 uv}

    vec4 texColor = $texture2D(tex, uv * vec2(5.0, 3.0));
    $fragColor = $MyColorFunc(nrm, texColor);
}

${shader: MyShader}
${program: vs=MyVertexShader fs=MyFragmentShader}