//------------------------------------------------------------------------------
//  test.shd
//------------------------------------------------------------------------------

/*
Bla Bla Bla
*/

//------------------------------------------------------------------------------
${func: MyTransformFunc}
${uniform: mat4 mvp ModelViewProj}
${in: vec4 pos}
${return: vec4}
{
    return mvp * pos;
}

//------------------------------------------------------------------------------
${func: MyColorFunc}
${in: vec4 nrm}
${in: vec4 texColor}
${return: vec4}
{
    return ((nrm * 0.5) + 0.5) * 0.75 + texColor * texColor * texColor;
}

//------------------------------------------------------------------------------
${vs: MyVertexShader}
${in: vec4 position}
${in: vec4 normal}
${in: vec2 texcoord0}
${out: vec4 nrm}
${out: vec2 uv}
{
    ${position} = ${MyTransformFunc}(position);
    nrm = normal;
    uv  = texcoord0;
}

//------------------------------------------------------------------------------
${fs: MyFragmentShader}
${uniform: sampler2D tex Texture}
${in: vec4 nrm}
${in: vec2 uv}
{
    vec4 texColor = ${texture2D}(tex, uv * vec2(5.0, 3.0));
    ${color} = ${MyColorFunc}(nrm, texColor);
}

${bundle: MyShader}
${program: MyVertexShader MyFragmentShader}
